<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>An annoying pitfall about Git | 我的云笔记本</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png">
    <meta name="description" content="">
    <meta name="author" content="Blackmegg1">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="white">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="##FFE5E5">
    
    <link rel="preload" href="/assets/css/0.styles.c14b62c2.css" as="style"><link rel="preload" href="/assets/js/app.fc284d51.js" as="script"><link rel="preload" href="/assets/js/2.1aeebccc.js" as="script"><link rel="preload" href="/assets/js/11.12a41abe.js" as="script"><link rel="preload" href="/assets/js/3.aa8f0b53.js" as="script"><link rel="prefetch" href="/assets/js/10.690e1b82.js"><link rel="prefetch" href="/assets/js/12.bcf89e87.js"><link rel="prefetch" href="/assets/js/13.7e7cd09c.js"><link rel="prefetch" href="/assets/js/14.7ce9366d.js"><link rel="prefetch" href="/assets/js/15.d6d57049.js"><link rel="prefetch" href="/assets/js/16.22341b27.js"><link rel="prefetch" href="/assets/js/17.15abb292.js"><link rel="prefetch" href="/assets/js/18.3f62e3b6.js"><link rel="prefetch" href="/assets/js/19.0c10fd73.js"><link rel="prefetch" href="/assets/js/20.ce4ac51f.js"><link rel="prefetch" href="/assets/js/21.eed478b5.js"><link rel="prefetch" href="/assets/js/22.06347cdc.js"><link rel="prefetch" href="/assets/js/23.50d3bd24.js"><link rel="prefetch" href="/assets/js/24.b9d6f4d0.js"><link rel="prefetch" href="/assets/js/25.98ef4e6e.js"><link rel="prefetch" href="/assets/js/26.104728fd.js"><link rel="prefetch" href="/assets/js/27.689f5f50.js"><link rel="prefetch" href="/assets/js/28.a9fb6234.js"><link rel="prefetch" href="/assets/js/29.eee6a5c5.js"><link rel="prefetch" href="/assets/js/4.f7db42f0.js"><link rel="prefetch" href="/assets/js/5.704a2c3a.js"><link rel="prefetch" href="/assets/js/6.760b40be.js"><link rel="prefetch" href="/assets/js/7.be80b1a5.js"><link rel="prefetch" href="/assets/js/8.57ebe38d.js"><link rel="prefetch" href="/assets/js/9.32d381e3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c14b62c2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/icons/favicon-32x32.png" alt="我的云笔记本" class="logo"> <span class="site-name can-hide">我的云笔记本</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" class="nav-link">
  目录
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端三剑客" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端三剑客" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/network/" class="nav-link">
  计网
</a></li><li class="dropdown-item"><!----> <a href="/basic/algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/basic/other/" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="/basic/git/" class="nav-link router-link-active">
  Git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他学科" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他学科" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/philosophy/" class="nav-link">
  哲学
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/Blackmegg1/Notebook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" class="nav-link">
  目录
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端三剑客" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端三剑客" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/js/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/html/" class="nav-link">
  HTML
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/network/" class="nav-link">
  计网
</a></li><li class="dropdown-item"><!----> <a href="/basic/algorithm/" class="nav-link">
  算法
</a></li><li class="dropdown-item"><!----> <a href="/basic/other/" class="nav-link">
  其他
</a></li><li class="dropdown-item"><!----> <a href="/basic/git/" class="nav-link router-link-active">
  Git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他学科" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他学科" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/philosophy/" class="nav-link">
  哲学
</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://github.com/Blackmegg1/Notebook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/basic/git/" aria-current="page" class="sidebar-link">git</a></li><li><a href="/basic/git/An annoying pitfall about Git.html" class="active sidebar-link">An annoying pitfall about Git</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/basic/git/An annoying pitfall about Git.html#刚开始使用github和git时-你可能会按以下-错误-步骤操作" class="sidebar-link">刚开始使用github和git时，你可能会按以下（错误）步骤操作：</a></li><li class="sidebar-sub-header"><a href="/basic/git/An annoying pitfall about Git.html#接下来我们分析上面步骤错误的原因" class="sidebar-link">接下来我们分析上面步骤错误的原因：</a></li><li class="sidebar-sub-header"><a href="/basic/git/An annoying pitfall about Git.html#真确的使用方式" class="sidebar-link">真确的使用方式：</a></li><li class="sidebar-sub-header"><a href="/basic/git/An annoying pitfall about Git.html#参考文章" class="sidebar-link">参考文章：</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="an-annoying-pitfall-about-git"><a href="#an-annoying-pitfall-about-git" class="header-anchor">#</a> An annoying pitfall about Git</h1> <h2 id="刚开始使用github和git时-你可能会按以下-错误-步骤操作"><a href="#刚开始使用github和git时-你可能会按以下-错误-步骤操作" class="header-anchor">#</a> 刚开始使用github和git时，你可能会按以下（错误）步骤操作：</h2> <p>创建一个仓库，命名，描述，然后添加README和license。</p> <p><img src="http://img.gxyhero.top/img/202108101731821.png" alt="image-20210320163549926"></p> <p><u>这里我们注意最后一句话</u>：</p> <p><img src="http://img.gxyhero.top/img/202108101732686.png" alt="image-20210320163815342"></p> <p>github告诉我们它将会为我们的新仓库创建<strong>main</strong>作为默认的branch。</p> <p>然后我们的新仓库就创建好了，同时，我们希望在本地也创建一个文件夹与这个仓库建立联系，这样我们就可以在本机的command使用git直接向远程仓库commit我们的代码，而不用打开github。</p> <p><img src="http://img.gxyhero.top/img/202108101732475.png" alt="image-20210320164307599"></p> <p>这里我在d盘创建了一个example文件夹作为本地仓库的载体（默认git已经安装并配置好了），</p> <p><img src="http://img.gxyhero.top/img/202108101732067.png" alt="image-20210320164412913"></p> <p>执行 <code>git init</code> 指令在这个文件夹创建了一个仓库。</p> <p><img src="http://img.gxyhero.top/img/202108101733352.png" alt="image-20210320164758304"></p> <p>随后我在example文件夹中创建一个新文件hello world.txt，现在我希望commit本次更改到我刚刚创建好的github仓库，首先我复制了我远程仓库的地址：</p> <p><img src="http://img.gxyhero.top/img/202108101732160.png" alt="image-20210320164932154"></p> <p>执行<code>git remote add ... ......</code>指令与远程仓库的建立连接：</p> <p><img src="http://img.gxyhero.top/img/202108101733456.png" alt="image-20210320165044155"></p> <p>然后<code>git add .</code>提交到缓冲区，<code>git commit -m &quot;...&quot;</code>提交commit，一切<strong>看起来那么顺利</strong>，只需最后<strong>git push</strong> 就愉快的结束了。</p> <p><img src="http://img.gxyhero.top/img/202108101733542.png" alt="image-20210320165428327"></p> <p>这里我们还记得github为我们创建的默认分支<strong>main</strong>，我们push到这个分支。</p> <p>糟糕的部分来了：</p> <div class="language- extra-class"><pre class="language-text"><code>error: src refspec main does not match any
</code></pre></div><p><img src="http://img.gxyhero.top/img/202108101733563.png" alt="image-20210320165628338"></p> <h2 id="接下来我们分析上面步骤错误的原因"><a href="#接下来我们分析上面步骤错误的原因" class="header-anchor">#</a> 接下来我们分析上面步骤错误的原因：</h2> <ol><li><p><strong>mian</strong> 和 <strong>master</strong></p> <p>你可能已经注意到了，在我们每次使用git指令时，git都在一直用蓝色的字提示我们当前处在一个叫<strong>master</strong>的分支：</p> <p><img src="http://img.gxyhero.top/img/202108101733574.png" alt="image-20210320170106554"></p></li></ol> <p>这是git为我们创建的默认分支，而在上述过程中我们完全无视了这一点，我们只关心github上的那个<strong>main</strong>分支，至于为什么它们的默认分支不同，github给出的解释是：</p> <blockquote><p>GitHub is working on replacing the term &quot;master&quot; on its service with a neutral term like &quot;main&quot; to avoid any unnecessary references to slavery</p></blockquote> <p>github觉得<strong>master</strong>有点slavery那味。</p> <p>所以原因就是github的仓库中没有<strong>master</strong>这个分支，我们本地的仓库没有<strong>main</strong>分支，那好办，我们将本地仓库的<strong>master</strong>分支改名为<strong>main</strong>分支，它们不就统一了？</p> <img src="http://img.gxyhero.top/img/202108101733045.png" alt="image-20210320171047682" style="zoom:150%;"> <p>执行<code>git branch -m master main</code>，可以看到<strong>master</strong>已经被成功改为<strong>main</strong>了，如此，我们继续push就不会有什么问题了吧？</p> <p><img src="http://img.gxyhero.top/img/202108101733562.png" alt="image-20210320171245755"></p> <ol start="2"><li><strong>! [rejected]        main -&gt; main (non-fast-forward)</strong></li></ol> <p>这个问题解释起来很简单，还记得我们创建仓库时添加到README和license吗？<u>在github仓库的<strong>main</strong>分支中有这两个文件，而在我们本地的仓库并没有这两个文件</u>，如果我们执行这次commit，那么可能导致这两个文件丢失。</p> <p>接下来你有以下几个解决方案：<strong>下列代码中的example为远程仓库名称</strong></p> <ol><li><p>无视警告，README和license我不要了。</p> <div class="language- extra-class"><pre class="language-text"><code>git push --force
</code></pre></div><p>执行以上指令强行提交。</p></li> <li><p>试着获取远程仓库的初始提交( initial commit)，就是README和license这两个文件的commit，在此基础上 rebase commit。但是这种方法可能有点棘手，不如暴力提交简单。</p> <div class="language- extra-class"><pre class="language-text"><code>git fetch example //获取初始提交
git rebase example/mian 
</code></pre></div></li> <li><p>试着合并初始提交与你的提交,这也是我<strong>最推荐的方法</strong>：</p> <div class="language- extra-class"><pre class="language-text"><code>git fetch example
git merge --allow-unrelated-histories example/main
</code></pre></div><p>首先执行<code>git fetch example</code> 获取初始提交</p> <p><img src="http://img.gxyhero.top/img/202108101733586.png" alt="image-20210320175151028"></p> <p>然后执行<code>git merge --allow-unrelated-histories example/main</code>合并，之后会进入这样一个文件，提示我们为本次提交加一些信息备注，我们很清楚我们在做什么，所以按两下ESC键，输入**:wq**（注意有冒号，这是UNIX保存的命令），回车</p></li></ol> <p><img src="http://img.gxyhero.top/img/202108101734964.png" alt="image-20210320174948306"></p> <p>可以看到本地的git仓库已经与远程仓库合并了，README和license也可以在本地仓库找到了。</p> <p><img src="http://img.gxyhero.top/img/202108101734169.png" alt="image-20210320175828773"></p> <p><img src="http://img.gxyhero.top/img/202108101734358.png" alt="image-20210320175837987"></p> <p>最后我们<code>git push example main</code></p> <p><img src="http://img.gxyhero.top/img/202108101734273.png" alt="image-20210320175910525"></p> <p><img src="http://img.gxyhero.top/img/202108101734607.png" alt="image-20210320175927561"></p> <p>终于提交成功了，泪目！！！！</p> <h2 id="真确的使用方式"><a href="#真确的使用方式" class="header-anchor">#</a> 真确的使用方式：</h2> <p>github创建仓库后使用<code>git clone</code>指令clone到本地。</p> <h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章：</h2> <blockquote><p>https://stackoverflow.com/questions/65173291/git-push-error-src-refspec-main-does-not-match-any-on-linux</p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">8/10/2021, 9:48:53 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/basic/git/" class="prev router-link-active">
        git
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.fc284d51.js" defer></script><script src="/assets/js/2.1aeebccc.js" defer></script><script src="/assets/js/11.12a41abe.js" defer></script><script src="/assets/js/3.aa8f0b53.js" defer></script>
  </body>
</html>
